<div class="device-config-container">
  <!-- Left column: Device list -->
  <div class="device-list-column">
    <div class="column-header">
      <h3>Devices</h3>
    </div>

    <div class="loading-state" *ngIf="loading">
      <wait-spinner></wait-spinner>
    </div>

    <div class="device-list" *ngIf="!loading">
      <div
        class="device-item"
        *ngFor="let deviceId of deviceIds"
        [class.selected]="selectedDeviceId === deviceId"
        (click)="onDeviceClick(deviceId)">
        {{ deviceId }}
      </div>
    </div>

    <div class="empty-state" *ngIf="!loading && deviceIds.length === 0">
      <p>No devices found</p>
    </div>
  </div>

  <!-- Right column: Device details -->
  <div class="device-details-column">
    <div class="column-header">
      <h3>Configuration Details</h3>
    </div>

    <div class="no-selection" *ngIf="!selectedDeviceId">
      <p>Select a device to view configuration</p>
    </div>

    <div class="loading-state" *ngIf="selectedDeviceDetails?.loading">
      <wait-spinner></wait-spinner>
    </div>

    <div class="details-content" *ngIf="selectedDeviceId && selectedDeviceDetails && !selectedDeviceDetails.loading">
      <div class="device-title">
        <h4>{{ selectedDeviceId }}</h4>
      </div>

      <div class="details-grid" *ngIf="selectedDeviceDetails.config">
        <div class="detail-row">
          <span class="label">Element Range:</span>
          <span class="value">{{ selectedDeviceDetails.config.minElement }} - {{ selectedDeviceDetails.config.maxElement }}</span>
        </div>

        <div class="detail-row">
          <span class="label">Energy Bounds (eV):</span>
          <span class="value">{{ selectedDeviceDetails.config.xrfeVLowerBound }} - {{ selectedDeviceDetails.config.xrfeVUpperBound }}</span>
        </div>

        <div class="detail-row">
          <span class="label">Energy Resolution:</span>
          <span class="value">{{ selectedDeviceDetails.config.xrfeVResolution }} eV</span>
        </div>

        <div class="detail-row">
          <span class="label">Beam Radius:</span>
          <span class="value">{{ selectedDeviceDetails.config.mmBeamRadius }} mm</span>
        </div>

        <div class="detail-row">
          <span class="label">Elevation Angle:</span>
          <span class="value">{{ selectedDeviceDetails.config.elevAngle }}Â°</span>
        </div>

        <div class="detail-row">
          <span class="label">Window Element:</span>
          <span class="value">{{ selectedDeviceDetails.config.windowElement }}</span>
        </div>

        <div class="detail-row">
          <span class="label">Tube Element:</span>
          <span class="value">{{ selectedDeviceDetails.config.tubeElement }}</span>
        </div>

        <div class="detail-row piquant-versions-row" *ngIf="selectedDeviceDetails.piquantVersions.length > 0">
          <span class="label">Piquant Versions:</span>
          <div class="piquant-versions-list">
            <button
              class="version-chip"
              *ngFor="let version of selectedDeviceDetails.piquantVersions"
              [class.selected]="selectedPiquantVersion === version"
              (click)="onPiquantVersionClick(version)">
              {{ version }}
            </button>
          </div>
        </div>

        <div class="detail-row" *ngIf="selectedDeviceDetails.config.defaultParams">
          <span class="label">Default Params:</span>
          <span class="value monospace">{{ selectedDeviceDetails.config.defaultParams }}</span>
        </div>
      </div>

      <div class="no-config" *ngIf="!selectedDeviceDetails.config">
        <p>Configuration data not available</p>
      </div>

      <!-- Piquant Config Details Section -->
      <div class="piquant-config-section" *ngIf="selectedPiquantVersion">
        <h5 class="section-title">Piquant Config: {{ selectedPiquantVersion }}</h5>

        <div class="loading-state" *ngIf="loadingPiquantConfig">
          <wait-spinner></wait-spinner>
        </div>

        <div class="piquant-details" *ngIf="!loadingPiquantConfig && piquantConfigDetails">
          <div class="detail-row" *ngIf="piquantConfigDetails.description">
            <span class="label">Description:</span>
            <span class="value">{{ piquantConfigDetails.description }}</span>
          </div>

          <div class="detail-row" *ngIf="piquantConfigDetails.configFile">
            <span class="label">Config File:</span>
            <span class="value monospace">{{ piquantConfigDetails.configFile }}</span>
          </div>

          <div class="detail-row" *ngIf="piquantConfigDetails.opticEfficiencyFile">
            <span class="label">Optic Efficiency File:</span>
            <span class="value monospace">{{ piquantConfigDetails.opticEfficiencyFile }}</span>
          </div>

          <div class="detail-row" *ngIf="piquantConfigDetails.calibrationFile">
            <span class="label">Calibration File:</span>
            <span class="value monospace">{{ piquantConfigDetails.calibrationFile }}</span>
          </div>

          <div class="detail-row" *ngIf="piquantConfigDetails.standardsFile">
            <span class="label">Standards File:</span>
            <span class="value monospace">{{ piquantConfigDetails.standardsFile }}</span>
          </div>
        </div>

        <div class="no-config" *ngIf="!loadingPiquantConfig && !piquantConfigDetails">
          <p>Failed to load piquant configuration</p>
        </div>
      </div>
    </div>
  </div>
</div>